echo "[SETUP]"; export START="$PWD"; export HOME="$PWD"; mkdir -p "t_cd/a/b"        | ESPERADO: entorno listo

pwd                                                                                 | ESPERADO: imprime ruta actual ; $?=0

cd "t_cd"
pwd                                                                                 | ESPERADO: cambia a .../t_cd ; $? del cd=0

echo "$OLDPWD"                                                                      | ESPERADO: contiene ruta anterior a entrar en t_cd

cd a
pwd                                                                                 | ESPERADO: .../t_cd/a

cd b
pwd                                                                                 | ESPERADO: .../t_cd/a/b

cd /                                                                                | ESPERADO: éxito ; $?=0
pwd                                                                                 | ESPERADO: /

cd -                                                                                | ESPERADO: imprime ruta anterior y cambia a ella ; $?=0
pwd                                                                                 | ESPERADO: coincide con lo impreso por cd -
echo "PWD=[$PWD] OLDPWD=[$OLDPWD]"                                                  | ESPERADO: PWD = dir actual ; OLDPWD = dir previo

cd .                                                                                | ESPERADO: éxito ; no cambia ; $?=0
pwd                                                                                 | ESPERADO: igual que antes

cd ..                                                                               | ESPERADO: sube un nivel ; $?=0
pwd                                                                                 | ESPERADO: directorio padre

cd "$START"                                                                         | ESPERADO: vuelve al directorio inicial ; $?=0
pwd                                                                                 | ESPERADO: $START

cd "$START/t_cd/a/b"                                                                | ESPERADO: entra en .../t_cd/a/b ; $?=0
pwd                                                                                 | ESPERADO: .../t_cd/a/b

cd "$START"
rm -rf "t_cd"
pwd                                                                                 | ESPERADO: $START ; árbol de pruebas borrado

# ---------------- ERRORES / SINTAXIS ----------------

cd 123123                                                                           | ESPERADO: "cd: No such file or directory" ; $?=1
echo $?

rm -f testfile_cd ; /usr/bin/printf "" > testfile_cd                                | ESPERADO: crea archivo normal
pwd                                                                                 | ESPERADO: muestra ruta actual
cd testfile_cd                                                                      | ESPERADO: "cd: Not a directory" ; $?=1
echo $?
rm -f testfile_cd

cd / "$START"                                                                       | ESPERADO: "cd: too many arguments" ; $?=1
echo $?
pwd                                                                                 | ESPERADO: no cambió

unset HOME
cd                                                                                  | ESPERADO: "cd: HOME not set" ; $?=1
echo $?
export HOME="$START"

unset OLDPWD
cd -                                                                                | ESPERADO: "cd: OLDPWD not set" ; $?=1
echo $?

pwd                                                                                 | ESPERADO: sigue en el mismo sitio ; $?=0
